<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Contact</title>
     <link rel="icon" type="image/png" href="public/img/ASUP-logo.png" />
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
     <link rel="stylesheet" href="public/css/styles.css">
</head>

<body>
     <header>
          <div class="head-container">
               <div class="logo">
                    <img src="public/img/ASUP-logo.png" alt="ASUP Logo">
               </div>
               <nav>
                    <ul>
                         <li><a href="index.html">Home</a></li>
                         <li><a href="about.html">About</a></li>
                         <li><a href="events.html">Events</a></li>
                         <li><a href="contact.html">Contact</a></li>
                    </ul>
               </nav>
          </div>
          <hr class="header-line">
     </header>
     <main>
          <article>
               <div class="foo-container">
                    <div class="min-container">
                         <h2>CONTACT ASUP FPOG CHAPTER</h2>
                         
                         <p>Do you want to contact us? Provide the details below in the contact form.</p>
                         <form action="" id="my-form"> 
                              <div class="msg"></div>        
                              <div class="success"></div>        
                              <input type="text" class="form-control" id="name" placeholder="Name">
                              <input type="number" class="form-control" name="phone" id="phone" placeholder="Phone Number">
                              <textarea name="text" class="form-control" id="text" cols="30" rows="3" placeholder="Message"></textarea>
                              <button type="submit" class="btn btn-success">Send</button>
                         </form>
                    </div>
               </div> 
          </article>
     </main>
     <footer>
          <hr>
          <p>&copy; Copyright ASUP FPOG Bonny Chapter 2022 - All rights reserved</p>
          <small><p>Developed by <a href="https://bit.ly/3tFp5VU" target="_blank" rel="noopener noreferrer">Kamel</a></p></small>
     </footer>
     <script type="module">
          import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
          import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-database.js";      
          //import { getDatabase } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-storage.js";      
          //import { getAuth } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-auth.js";

          const firebaseConfig = {
               apiKey: "AIzaSyCS7y8LT91DUWGBnqUMxmKQvx5P9j8kBnE",
               authDomain: "asup-web.firebaseapp.com",
               projectId: "asup-web",
               storageBucket: "asup-web.appspot.com",
               messagingSenderId: "887415144657",
               appId: "1:887415144657:web:ae57eb60e66e528a8545f0"
               };
          
               // Initialize Firebase
               const app = initializeApp(firebaseConfig);
               //const analytics = getAnalytics(app);
               const database = getDatabase(app);
               //const auth = getAuth();

               // Contact Page

               const myForm = document.querySelector('#my-form');
               const nameInput = document.querySelector('#name');
               const numberInput = document.querySelector('#phone');
               const textInput = document.querySelector('#text');
               const msg = document.querySelector('.msg'); 
               const success = document.querySelector('.success'); 
               //const dt = Date();

                    myForm.addEventListener('submit', onSubmit);
                    function onSubmit(e) {
                    e.preventDefault();
                   
                         if(nameInput.value === '' || numberInput.value === '' || textInput.value === '') {
                              //
                              msg.innerHTML = 'Please enter all fields!';
                              setTimeout(() => msg.remove(), 3000)
                         }
                         else {
                              const nameInput = document.getElementById('name').value;
                              const numberInput = document.getElementById('phone').value;
                              const textInput = document.getElementById('text').value;

                              const dt = new Date();
                              set(ref(database, 'messages/'), {
                                   name: nameInput,
                                   number: numberInput,
                                   message: textInput,
                                   date: dt.toString()
                              });                  
                                   //success.innerHTML = 'We recieved your message. Thanks!';
                                   setTimeout(() => success.remove(), 3000);
                              }; 
                         };  
     
     </script>
</body>
</html>